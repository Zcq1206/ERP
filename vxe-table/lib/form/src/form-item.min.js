"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _xeUtils=_interopRequireDefault(require("xe-utils")),_conf=_interopRequireDefault(require("../../v-x-e-table/src/conf")),_vXETable=_interopRequireDefault(require("../../v-x-e-table")),_utils=require("../../tools/utils"),_util=require("./util"),_render=require("./render");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var props={title:String,field:String,size:String,span:[String,Number],align:String,titleAlign:String,titleWidth:[String,Number],className:[String,Function],titleOverflow:{type:[Boolean,String],default:null},titlePrefix:Object,titleSuffix:Object,resetValue:{default:null},visible:{type:Boolean,default:null},visibleMethod:Function,folding:Boolean,collapseNode:Boolean,itemRender:Object},watch={};Object.keys(props).forEach(function(t){watch[t]=function(e){this.itemConfig.update(t,e)}});var renderItem=function(e,t,i,l){var n,r=t.rules,o=t.data,a=t.collapseAll,s=t.validOpts,u=t.titleOverflow,d=i.title,f=i.folding,c=i.visible,m=i.visibleMethod,v=i.field,g=i.collapseNode,p=i.itemRender,x=i.showError,_=i.errRule,h=i.className,b=i.titleOverflow,O=(0,_utils.isEnableConf)(p)?_vXETable.default.renderer.get(p.name):null,q=i.span||t.span,I=i.align||t.align,N=i.titleAlign||t.titleAlign,S=i.titleWidth||t.titleWidth,w=m,y=_xeUtils.default.isUndefined(b)||_xeUtils.default.isNull(b)?u:b,F="title"===y,M=!0===y||"tooltip"===y,R=F||M||"ellipsis"===y,C={data:o,property:v,item:i,$form:t};if(!w&&O&&O.itemVisibleMethod&&(w=O.itemVisibleMethod),r){var E=r[v];E&&(n=E.some(function(e){return e.required}))}var T=[];l&&l.default?T=t.callSlot(l.default,C,e):O&&O.renderItemContent?T=O.renderItemContent.call(t,e,p,C):O&&O.renderItem?T=O.renderItem.call(t,e,p,C):v&&(T=["".concat(_xeUtils.default.get(o,v))]);var U=M?{mouseenter:function(e){t.triggerTitleTipEvent(e,C)},mouseleave:t.handleTitleTipLeaveEvent}:{};return e("div",{class:["vxe-form--item",i.id,q?"vxe-col--".concat(q," is--span"):null,h?_xeUtils.default.isFunction(h)?h(C):h:"",{"is--title":d,"is--required":n,"is--hidden":!1===c||f&&a,"is--active":!w||w(C),"is--error":x}]},[e("div",{class:"vxe-form--item-inner"},[d||l&&l.title?e("div",{class:["vxe-form--item-title",N?"align--".concat(N):null,{"is--ellipsis":R}],style:S?{width:isNaN(S)?S:"".concat(S,"px")}:null,attrs:{title:F?(0,_utils.getFuncText)(d):null},on:U},(0,_render.renderTitle)(e,t,i)):null,e("div",{class:["vxe-form--item-content",I?"align--".concat(I):null]},T.concat([g?e("div",{class:"vxe-form--item-trigger-node",on:{click:t.toggleCollapseEvent}},[e("span",{class:"vxe-form--item-trigger-text"},a?_conf.default.i18n("vxe.form.unfolding"):_conf.default.i18n("vxe.form.folding")),e("i",{class:["vxe-form--item-trigger-icon",a?_conf.default.icon.FORM_FOLDING:_conf.default.icon.FORM_UNFOLDING]})]):null,_&&s.showMessage?e("div",{class:"vxe-form--item-valid",style:_.maxWidth?{width:"".concat(_.maxWidth,"px")}:null},_.message):null]))])])},_default={name:"VxeFormItem",props:props,inject:{$xeform:{default:null},xeformgather:{default:null}},data:function(){return{itemConfig:null}},watch:watch,mounted:function(){(0,_util.assemItem)(this)},created:function(){this.itemConfig=(0,_util.createItem)(this.$xeform,this)},destroyed:function(){(0,_util.destroyItem)(this)},render:function(e){var t=this.$xeform;return t&&t.customLayout?renderItem(e,t,this.itemConfig,this.$scopedSlots):e("div")}};exports.default=_default;